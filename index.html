<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Learn Arabic - From Zero to Fluent</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
       .nav-icon {
            width: 86px;  /* Adjust the size as needed */
            height: 86px;
            object-fit: contain;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="./logo/logo.png" alt="Logo" class="nav-icon" />
                <span>Arabic Vibes</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#course" class="nav-link">Course</a></li>
                <li><a href="#levels" class="nav-link">Levels</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
                <li><a href="#faq" class="nav-link">FAQ</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-background">
            <div class="hero-overlay"></div>
        </div>
        <div class="hero-content">
          <div class="hero-text">
                <h1 class="arabic-vibes-title"><span class="gradient-text">Arabic Vibes</span></h1>

                <h1 class="hero-title">
                    Master Arabic <span class="gradient-text">From Zero</span>
                </h1>

                <p class="hero-subtitle">Learn Arabic with a native speaker ‚Ä¢ Professional teaching ‚Ä¢ Personalized approach</p>

                <div class="hero-buttons">
                    <a href="#contact" class="btn btn-primary">Get Free Trial</a>
                    <a href="#course" class="btn btn-secondary">View Course</a>
                </div>
            </div>

            <div class="hero-image">
                <!-- Instructor Photo -->
                <img src="./instructor/samer_No_bg.png" 
                     alt="Arabic Instructor" 
                     class="instructor-photo">
                
                <div class="floating-card">
                    <i class="fas fa-language"></i>
                    <span>Native Speaker</span>
                </div>
                <div class="floating-card card-2">
                    <i class="fas fa-graduation-cap"></i>
                    <span>5 Years Experience</span>
                </div>
                <div class="floating-card card-3">
                    <i class="fas fa-users"></i>
                    <span>All Ages Welcome</span>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <div class="section-header">
                <h2>About Your Instructor</h2>
                <p>Learn from an experienced native Arabic speaker</p>
            </div>
            <div class="about-content">
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <h3>Native Arabic Speaker</h3>
                    <p>As a native Arabic speaker, I offer learners an authentic and immersive language experience. Studying with a native ensures accurate pronunciation, natural phrasing, and a deeper understanding of cultural context. It's a valuable advantage for anyone serious about mastering Arabic.</p>
                </div>
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h3>5 Years Teaching Experience</h3>
                    <p>Proven expertise in guiding students from complete beginners to confident Arabic speakers with personalized teaching methods.</p>
                </div>
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <h3>Academic Excellence</h3>
                    <p>Fourth-year student at Cairo University's Faculty of Arts, English Department, combining linguistic expertise with pedagogical knowledge.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Course Introduction -->
    <section id="course" class="course">
        <div class="container">
            <div class="section-header">
                <h2>Course Introduction</h2>
                <p>Discover what makes our Arabic course special</p>
            </div>
            <div class="course-content">
                <div class="pdf-viewer">
                    <div class="pdf-header">
                        <i class="fas fa-file-pdf"></i>
                        <span>Course Introduction PDF</span>
                        <a href="pdf/arabic_introduction.pdf" target="_blank" class="pdf-download">
                            <i class="fas fa-download"></i>
                        </a>
                    </div>
                        <iframe 
                        id="coursePDF"
                        src="https://docs.google.com/gview?url=https://Arabic-vibes.github.io/Learn-Arabic/pdf/arabic_introduction.pdf&embedded=true"
                        width="100%" 
                        height="600px"
                        style="border: none; border-radius: 10px;">
                        </iframe>     
           </div>
                <div class="course-highlights">
                    <h3>What You'll Learn</h3>
                    <div class="highlight-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Arabic alphabet and basic writing</span>
                    </div>
                    <div class="highlight-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Essential vocabulary for daily conversations</span>
                    </div>
                    <div class="highlight-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Grammar fundamentals made simple</span>
                    </div>
                    <div class="highlight-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Cultural context and practical usage</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Course Levels Section -->
    <section id="levels" class="course-levels">
        <div class="container">
            <div class="section-header">
                <h2 style="color: #fff;">Course Levels & Pricing</h2>
                <p style="color: #fff;">Choose the perfect level for your Arabic learning journey</p>
            </div>
            
            <div class="course-content" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                <!-- Beginner Course -->
                <div class="course-card">
                    <h3 style="color: #ffd700; font-size: 1.5rem; margin-bottom: 20px;">
                        <i class="fas fa-seedling"></i> Beginner Course
                    </h3>
                    <div class="course-price">$5 / lecture</div>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Introduction to Arabic Language</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Arabic Alphabet and Writing System</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Basic Grammar and Fundamentals</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Differences between Arabic and English</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Essential Vocabulary</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Transletration of the arabic words,so you can read it correctly </li>
                    </ul>
                    <a href="#contact" class="btn-trial">
                        <i class="fas fa-play"></i> Get Free Trial
                    </a>
                </div>

                <!-- Intermediate Course -->
                <div class="course-card">
                    <h3 style="color: #ffd700; font-size: 1.5rem; margin-bottom: 20px;">
                        <i class="fas fa-chart-line"></i> Intermediate Course
                    </h3>
                    <div class="course-price">$5 / lecture</div>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Advanced Reading Skills</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Fluent Writing Techniques</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Natural Conversation Practice</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Active Listening Exercises</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Perfect Pronunciation Training</li>
                        <li style="margin: 10px 0;"><i class="fas fa-check" style="color: #10b981; margin-right: 10px;"></i>Intensive Practice Sessions</li>
                    </ul>
                    <a href="#contact" class="btn-trial">
                        <i class="fas fa-play"></i> Get Free Trial
                    </a>
                </div>
            </div>

            <!-- Discount Section -->
            <!-- Updated Discount Section -->
            <div class="discount-section">
                <h3 style="color: #ffd700; text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-users"></i> Friend Discounts Available!
                </h3>
                <p style="text-align: center; margin-bottom: 20px;">Bring your friends and save money together! The more friends, the bigger the discount!</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div class="discount-item">
                        <i class="fas fa-user-friends"></i>
                        <div>
                            <strong>Bring 1 Friend</strong><br>
                            <span style="text-decoration: line-through; color: #ccc;">$10 each</span> 
                            <span style="color: #ffd700; font-weight: bold;">$8 each</span>
                        </div>
                    </div>
                    <div class="discount-item">
                        <i class="fas fa-users"></i>
                        <div>
                            <strong>Bring 2 Friends</strong><br>
                            <span style="text-decoration: line-through; color: #ccc;">$15 total</span> 
                            <span style="color: #ffd700; font-weight: bold;">$12 total</span>
                        </div>
                    </div>
                    <div class="discount-item">
                        <i class="fas fa-users-cog"></i>
                        <div>
                            <strong>Bring 3+ Friends</strong><br>
                            <span style="color: #ffd700; font-weight: bold;">Custom Group Pricing</span><br>
                            <span style="font-size: 0.9em;">Starting at $3 per person</span>
                        </div>
                    </div>
                </div>
                
                <p style="text-align: center; margin-top: 20px; font-style: italic;">
                    "Learning together makes it more fun and affordable! Add as many friends as you want!"
                </p>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <div class="section-header">
                <h2 style="color: #fff;">Start Your Arabic Journey</h2>
                <p style="color: #fff;">Ready to begin? Fill out the form below and we'll get you started with a free trial!</p>
            </div>

            <div class="contact-content">
                <!-- Form Section -->
                <div class="form-section">
                    <div class="form-header">
                        <h3>
                            <i class="fas fa-user-edit"></i>
                            Free Trial Registration
                        </h3>
                        <p>Join thousands of successful Arabic learners worldwide</p>
                    </div>

                    <form class="contact-form" id="contactForm">
                        <div class="form-group">
                            <label for="name">
                                <i class="fas fa-user"></i>
                                Full Name
                            </label>
                            <input type="text" id="name" name="name" placeholder="Enter your full name" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone">
                                    <i class="fas fa-phone"></i>
                                    Phone Number
                                </label>
                                <div class="phone-input-group">
                                    <div class="country-code-container">
                                        <input 
                                            type="text" 
                                            id="countrySearch" 
                                            class="country-search" 
                                            placeholder="üá™üá¨ Egypt (+20)" 
                                            readonly
                                            data-selected-code="+20"
                                            data-selected-country="Egypt"
                                        >
                                        <div class="country-dropdown" id="countryDropdown">
                                            <div class="loading">Loading countries...</div>
                                        </div>
                                    </div>
                                    <input type="tel" id="phone" name="phone" class="phone-number" placeholder="Your phone number" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="age">
                                    <i class="fas fa-birthday-cake"></i>
                                    Age
                                </label>
                                <input type="number" id="age" name="age" min="5" max="99" placeholder="Your age" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="email">
                                <i class="fas fa-envelope"></i>
                                Email Address
                            </label>
                            <input type="email" id="email" name="email" placeholder="your.email@example.com" required>
                        </div>

                        <div class="form-group">
                            <label for="level">
                                <i class="fas fa-chart-line"></i>
                                Current Arabic Level
                            </label>
                            <select id="level" name="level" required>
                                <option value="">Select your current level</option>
                                <option value="zero">üå± Starting from Zero</option>
                                <option value="beginner">üìö Beginner</option>
                                <option value="intermediate">üéØ Intermediate</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="question-user">
                                <i class="fas fa-question-circle"></i>
                               Do you have any Questions?
                            </label>
                            <input type="text" id="question-user" name="question-user" placeholder="(*optional)" >
                        </div>


                        <!-- Friend Registration Section -->
                        <div class="friend-section">
                            <button type="button" class="friend-toggle" id="addFriendBtn">
                                <i class="fas fa-user-plus"></i>
                                Add Friend for Discount
                            </button>
                            <div id="friendsContainer"></div>
                            <button type="button" class="add-friend" id="addAnotherFriend" style="display: none;">
                                <i class="fas fa-plus"></i>
                                Add Another Friend
                            </button>
                        </div>

                        <button type="submit" class="form-btn">
                            <i class="fas fa-play"></i>
                            Get Free Trial
                        </button>

                        <div class="success-message" id="successMessage">
                            <i class="fas fa-check-circle"></i>
                            <span>Registration successful! We'll contact you soon for your free trial.</span>
                        </div>
                    </form>
                </div>

                <!-- Contact Info Section -->
                <div class="contact-info-section">
                    <div class="contact-info-card">
                        <div class="info-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <h4>Email Us</h4>
                        <p>Get in touch for questions, support, or additional information about our courses.</p>
                        <a href="mailto:samer.masoud1324@gmail.com">
                            <i class="fas fa-external-link-alt"></i>
                            samer.masoud1324@gmail.com
                        </a>
                    </div>

                    <div class="contact-info-card">
                        <div class="info-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h4>Course Duration</h4>
                        <p>Flexible learning schedule designed to fit your lifestyle and learning pace.</p>
                        <a href="#faq">
                            <i class="fas fa-info-circle"></i>
                            1-3 months (flexible)
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="bg-gray-100 py-12">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-8">Frequently Asked Questions</h2>
            <p class="text-center mb-12">Everything you need to know about our Arabic course</p>

            <div class="faq-content">
                <div class="faq-item">
                    <h3 class="faq-question">Can children join the course?<i class="fas fa-plus"></i></h3>

                <div class="faq-answer">
                    <p>Absolutely not! The course is specifically designed for complete beginners. It starts from the very beginning - teaching you the Arabic alphabet, basic sounds, and fundamental concepts. No prior knowledge of Arabic is required. Whether you have never seen Arabic script before or you are completely new to the language, we will guide you step by step through your learning journey.</p>
                </div>
            </div>

            <div class="faq-item">
                <h3 class="faq-question">Can children join the course?<i class="fas fa-plus"></i></h3>
                <div class="faq-answer">
                    <p>Yes, absolutely! Children are very welcome in the Arabic course. In fact, children often learn languages faster than adults due to their natural curiosity and ability to absorb new information. The course adapts teaching methods to be age-appropriate, using interactive games, visual aids, and fun activities that keep young learners engaged. I have the experience of knowing how to make Arabic learning enjoyable and accessible for learners of all ages, from children to adults.</p>
                </div>
            </div>

            <div class="faq-item">
                <h3 class="faq-question">What is the duration of the course?<i class="fas fa-plus"></i></h3>
                <div class="faq-answer">
                    <p>The course typically takes 1-3 months to complete, depending on your learning pace, availability, and personal goals. We offer flexible scheduling to accommodate your lifestyle. Some students prefer intensive daily lessons and complete the course in 1 month, while others choose a more relaxed pace with 2-3 lessons per week, finishing in 2-3 months. The duration is completely customizable based on your needs and schedule.</p>
                </div>
            </div>

            <div class="faq-item">
                <h3 class="faq-question">How does the friend discount work?<i class="fas fa-plus"></i></h3>
                <div class="faq-answer">
                    <p>Our friend discount system is simple and rewarding! When you bring a friend, instead of paying $10 individually, you both pay only $8 each. If you bring 2 friends (3 people total), instead of paying $15 individually, you pay only $12 total ($4 each). This makes learning more affordable and fun when you study together with friends or family members.</p>
                </div>
            </div>

            <div class="faq-item">
                <h3 class="faq-question">What's included in the free trial?<i class="fas fa-plus"></i></h3>
                <div class="faq-answer">
                    <p>The free trial includes a complete introductory lesson where you'll learn about the Arabic alphabet, basic pronunciation, and get a feel for our teaching style. You'll also receive course materials, understand the learning methodology, and have the opportunity to ask questions about the program. This helps you make an informed decision about continuing with the full course.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-book-open"></i>
                        <span>Arabic Vibes</span>
                    </div>
                    <p>Learn Arabic from a native speaker with 5 years of teaching experience. Start your journey from zero to fluent!</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Contact</h4>
                    <div class="footer-contact">
                        <a href="mailto:samer.masoud1324@gmail.com" class="contact-link email">
                            <i class="fas fa-envelope"></i>
                            <span>samer.masoud1324@gmail.com</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <a href="https://www.linkedin.com/in/abdul-halim-aldib-955a73317/" style="color: #fff; text-decoration:none;"> 
                    <p>&copy; 2025 Abdulhalim aldib. All rights reserved. Start your Arabic learning journey today!</p>
                    <p>click to know more about Abdulhalim</p>
                </a>
            </div>
        </div>
    </footer>



    <script>
        // JavaScript to handle image loading errors
        document.addEventListener('DOMContentLoaded', function() {
            const instructorPhoto = document.querySelector('.instructor-photo');
            
            // Check if image exists and handle loading
            instructorPhoto.addEventListener('error', function() {
                console.log('Original instructor image failed to load');
                // Try alternative image sources
                const alternativeImages = [
                    'instructor/samer_No_bg.png',
                    'assets/instructor.png',
                    'images/instructor.jpg',
                    'https://via.placeholder.com/300x400/667eea/ffffff?text=Arabic+Instructor'
                ];
                
                let imageIndex = 0;
                const tryNextImage = () => {
                    if (imageIndex < alternativeImages.length) {
                        this.src = alternativeImages[imageIndex];
                        imageIndex++;
                    }
                };
                
                this.addEventListener('error', tryNextImage);
                tryNextImage();
            });
        });
    </script>

    <script>
        class CountryCodeSelector {
            constructor() {
                this.countries = [];
                this.filteredCountries = [];
                this.selectedCountry = { name: 'Egypt', code: '+20', flag: 'üá™üá¨' };
                this.friendCounter = 0;
                
                this.init();
            }

            async init() {
                await this.loadCountries();
                this.setupEventListeners();
                this.setupForm();
            }

            async loadCountries() {
                try {
                    const response = await fetch('https://restcountries.com/v3.1/all?fields=name,idd,cca2');
                    const data = await response.json();
                    
                    this.countries = data
                        .filter(country => country.idd && country.idd.root && country.idd.suffixes)
                        .map(country => ({
                            name: country.name.common,
                            code: country.idd.root + (country.idd.suffixes[0] || ''),
                            cca2: country.cca2,
                            flag: this.getFlagEmoji(country.cca2)
                        }))
                        .sort((a, b) => a.name.localeCompare(b.name));
                    
                    this.filteredCountries = [...this.countries];
                    this.renderCountryDropdown();
                    
                } catch (error) {
                    console.error('Error loading countries:', error);
                    document.getElementById('countryDropdown').innerHTML = 
                        '<div class="error">Error loading countries. Please refresh the page.</div>';
                }
            }

            getFlagEmoji(countryCode) {
                const codePoints = countryCode
                    .toUpperCase()
                    .split('')
                    .map(char => 127397 + char.charCodeAt());
                return String.fromCodePoint(...codePoints);
            }
            getFlagEmojiFromCode(code) {
                const country = this.countries.find(c => c.code === code);
                return country ? country.flag : 'üåç';
            }

            renderCountryDropdown() {
                const dropdown = document.getElementById('countryDropdown');
                
                if (this.filteredCountries.length === 0) {
                    dropdown.innerHTML = '<div class="country-option">No countries found</div>';
                    return;
                }
                
                dropdown.innerHTML = this.filteredCountries
                    .map(country => `
                        <div class="country-option" data-country='${JSON.stringify(country)}'>
                            <span>${country.flag}</span>
                            <span>${country.name}</span>
                            <span style="margin-left: auto; opacity: 0.7;">${country.code}</span>
                        </div>
                    `).join('');
            }

            filterCountries(searchTerm) {
                const term = searchTerm.toLowerCase();
                this.filteredCountries = this.countries.filter(country =>
                    country.name.toLowerCase().includes(term) ||
                    country.code.includes(term)
                );
                this.renderCountryDropdown();
            }

            setupEventListeners() {
                const searchInput = document.getElementById('countrySearch');
                const dropdown = document.getElementById('countryDropdown');

                // Handle search input clicks
                searchInput.addEventListener('click', (e) => {
                    e.preventDefault();
                    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
                    if (dropdown.style.display === 'block') {
                        // Convert to editable for search
                        searchInput.removeAttribute('readonly');
                        searchInput.placeholder = 'Search countries...';
                        searchInput.value = '';
                        searchInput.focus();
                    }
                });

                // Handle search input
                searchInput.addEventListener('input', (e) => {
                    this.filterCountries(e.target.value);
                });

                // Handle country selection
                dropdown.addEventListener('click', (e) => {
                    const option = e.target.closest('.country-option');
                    if (option && option.dataset.country) {
                        const country = JSON.parse(option.dataset.country);
                        this.selectCountry(country, searchInput, dropdown);
                    }
                });

                // Handle click outside to close dropdown
                document.addEventListener('click', (e) => {
                    if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
                        this.closeDropdown(searchInput, dropdown);
                    }
                });

                // Handle escape key
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeDropdown(searchInput, dropdown);
                    }
                });
            }

            selectCountry(country, searchInput, dropdown) {
                // Set data attributes directly on the input
                searchInput.value = `${country.flag} ${country.name} (${country.code})`;
                searchInput.placeholder = `${country.flag} ${country.name} (${country.code})`;
                searchInput.dataset.selectedCode = country.code;
                searchInput.dataset.selectedCountry = country.name;

                // Close dropdown
                searchInput.setAttribute('readonly', true);
                dropdown.style.display = 'none';

                // Reset filtered dropdown (optional)
                this.filteredCountries = [...this.countries];
                dropdown.innerHTML = this.filteredCountries.map(c => `
                    <div class="country-option" data-country='${JSON.stringify(c)}'>
                        <span>${c.flag}</span>
                        <span>${c.name}</span>
                        <span style="margin-left: auto; opacity: 0.7;">${c.code}</span>
                    </div>
                `).join('');
                searchInput.value = `${country.flag} ${country.name} (${country.code})`;
                searchInput.placeholder = `${country.flag} ${country.name} (${country.code})`;
                searchInput.dataset.selectedCode = country.code;
                searchInput.dataset.selectedCountry = country.name;
                
                // Mark as readonly again
                searchInput.setAttribute('readonly', true);
                dropdown.style.display = 'none';
                
                // Reset filtered countries
                this.filteredCountries = [...this.countries];
                this.renderCountryDropdown();
            }

            closeDropdown(searchInput, dropdown) {
                dropdown.style.display = 'none';
                searchInput.setAttribute('readonly', true);
                searchInput.value = `${this.selectedCountry.flag} ${this.selectedCountry.name} (${this.selectedCountry.code})`;
                searchInput.placeholder = `${this.selectedCountry.flag} ${this.selectedCountry.name} (${this.selectedCountry.code})`;
                
                // Reset search
                this.filteredCountries = [...this.countries];
                this.renderCountryDropdown();
            }

            createFriendCountrySelector(friendId) {
                const selectorId = `friend-${friendId}-country`;
                const dropdownId = `friend-${friendId}-dropdown`;
                
                return `
                    <div class="country-code-container">
                        <input 
                            type="text" 
                            id="${selectorId}" 
                            class="country-search" 
                            placeholder="üá™üá¨ Egypt (+20)" 
                            readonly
                            data-selected-code="+20"
                            data-selected-country="Egypt"
                        >
                        <div class="country-dropdown" id="${dropdownId}">
                            ${this.countries.map(country => `
                                <div class="country-option" data-country='${JSON.stringify(country)}'>
                                    <span>${country.flag}</span>
                                    <span>${country.name}</span>
                                    <span style="margin-left: auto; opacity: 0.7;">${country.code}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            setupFriendCountrySelector(friendId) {
                const searchInput = document.getElementById(`friend-${friendId}-country`);
                const dropdown = document.getElementById(`friend-${friendId}-dropdown`);

                if (!searchInput || !dropdown) return;

                // Toggle dropdown visibility
                searchInput.addEventListener('click', (e) => {
                    e.preventDefault();
                    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
                    if (dropdown.style.display === 'block') {
                        searchInput.removeAttribute('readonly');
                        searchInput.placeholder = 'Search countries...';
                        searchInput.value = '';
                        searchInput.focus();
                    }
                });

                // Filter country list on input
                searchInput.addEventListener('input', (e) => {
                    const term = e.target.value.toLowerCase();
                    const filtered = this.countries.filter(country =>
                        country.name.toLowerCase().includes(term) || country.code.includes(term)
                    );

                    dropdown.innerHTML = filtered.map(country => `
                        <div class="country-option" data-country='${JSON.stringify(country)}'>
                            <span>${country.flag}</span>
                            <span>${country.name}</span>
                            <span style="margin-left: auto; opacity: 0.7;">${country.code}</span>
                        </div>
                    `).join('');
                });

                // Handle selection
                dropdown.addEventListener('click', (e) => {
                    const option = e.target.closest('.country-option');
                    if (option && option.dataset.country) {
                        const country = JSON.parse(option.dataset.country);
                        // ‚úÖ Independent selection
                        searchInput.value = `${country.flag} ${country.name} (${country.code})`;
                        searchInput.placeholder = `${country.flag} ${country.name} (${country.code})`;
                        searchInput.dataset.selectedCode = country.code;
                        searchInput.dataset.selectedCountry = country.name;
                        searchInput.setAttribute('readonly', true);
                        dropdown.style.display = 'none';
                    }
                });

                // Close on outside click
                document.addEventListener('click', (e) => {
                    if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
                        dropdown.style.display = 'none';
                        searchInput.setAttribute('readonly', true);

                        // Restore last selected value
                        const code = searchInput.dataset.selectedCode || '+20';
                        const name = searchInput.dataset.selectedCountry || 'Egypt';
                        searchInput.value = `${this.getFlagEmojiFromCode(code)} ${name} (${code})`;
                        searchInput.placeholder = `${this.getFlagEmojiFromCode(code)} ${name} (${code})`;
                    }
                });
            }

            setupForm() {
                const addFriendBtn = document.getElementById('addFriendBtn');
                const addAnotherFriend = document.getElementById('addAnotherFriend');
                const friendsContainer = document.getElementById('friendsContainer');
                const form = document.getElementById('contactForm');

                addFriendBtn.addEventListener('click', () => {
                    this.addFriend();
                    addFriendBtn.style.display = 'none';
                    addAnotherFriend.style.display = 'flex';
                });

                addAnotherFriend.addEventListener('click', () => {
                    this.addFriend();
                });

                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleFormSubmission(e);
                });
            }

            addFriend() {
                this.friendCounter++;
                const friendId = this.friendCounter;
                const friendsContainer = document.getElementById('friendsContainer');
                
                const friendForm = document.createElement('div');
                friendForm.className = 'friend-form';
                friendForm.innerHTML = `
                    <h4 style="color: #ffd700; margin-bottom: 15px;">
                        <i class="fas fa-user-friends"></i> Friend ${friendId}
                    </h4>
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Friend's Name</label>
                        <input type="text" name="friend-${friendId}-name" placeholder="Enter friend's name" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fas fa-phone"></i> Friend's Phone</label>
                            <div class="phone-input-group">
                                ${this.createFriendCountrySelector(friendId)}
                                <input type="tel" name="friend-${friendId}-phone" class="phone-number" placeholder="Friend's phone number" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-birthday-cake"></i> Friend's Age</label>
                            <input type="number" name="friend-${friendId}-age" min="5" max="99" placeholder="Friend's age" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-envelope"></i> Friend's Email</label>
                        <input type="email" name="friend-${friendId}-email" placeholder="friend@example.com" required>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-chart-line"></i> Friend's Arabic Level</label>
                        <select name="friend-${friendId}-level" required>
                            <option value="">Select friend's level</option>
                            <option value="zero">üå± Starting from Zero</option>
                            <option value="beginner">üìö Beginner</option>
                            <option value="intermediate">üéØ Intermediate</option>
                        </select>
                    </div>
                    <button type="button" class="remove-friend" onclick="this.parentElement.remove()">
                        <i class="fas fa-trash"></i> Remove Friend
                    </button>
                `;
                
                friendsContainer.appendChild(friendForm);
                
                // Setup country selector for this friend
                setTimeout(() => {
                    this.setupFriendCountrySelector(friendId);
                }, 100);
            }

            handleFormSubmission(e) {
                const formData = new FormData(e.target);
                const data = {};
                
                // Collect main user data
                data.name = formData.get('name');
                data.phone = document.getElementById('countrySearch').dataset.selectedCode + formData.get('phone');
                data.age = formData.get('age');
                data.email = formData.get('email');
                data.level = formData.get('level');
                data.country = document.getElementById('countrySearch').dataset.selectedCountry;
                
                // Collect friends data
                data.friends = [];
                const friendForms = document.querySelectorAll('.friend-form');
                friendForms.forEach((form, index) => {
                    const friendId = index + 1;
                    const friendCountryInput = form.querySelector(`#friend-${friendId}-country`);
                    
                    data.friends.push({
                        name: formData.get(`friend-${friendId}-name`),
                        phone: (friendCountryInput?.dataset.selectedCode || '+20') + formData.get(`friend-${friendId}-phone`),
                        age: formData.get(`friend-${friendId}-age`),
                        email: formData.get(`friend-${friendId}-email`),
                        level: formData.get(`friend-${friendId}-level`),
                        country: friendCountryInput?.dataset.selectedCountry || 'Egypt'
                    });
                });
                
                console.log('Form Data:', data);
                
                // Show success message
                const successMessage = document.getElementById('successMessage');
                successMessage.style.display = 'flex';
                
                // Hide success message after 5 seconds
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 5000);
                
                // You can now send this data to your server
                // Example: await this.sendToServer(data);
            }

            async sendToServer(data) {
                try {
                    const response = await fetch('/submit-registration', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    
                    if (!response.ok) {
                        throw new Error('Failed to submit registration');
                    }
                    
                    const result = await response.json();
                    return result;
                } catch (error) {
                    console.error('Error submitting form:', error);
                    throw error;
                }
            }
        }

        // Initialize the country code selector when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new CountryCodeSelector();
        });
    </script>
<script src="script.js"></script
</body>
</html>